# 方法解説: ポリゴン数の削減

## 機械的な削減方法 (<u>デシメート</u>)

「Blender ローポリ化」 などで検索するとだいたい出てくるのが自動削減の方法です。方法は、以下の2種類がありますが、どちらも機能は同じです。[^3-1]

[^3-1]: ローカライズの関係でこうなっているようで、英語だとどちらも `decimate` という単語が使われているようです。

-  オブジェクトの編集モードで、 <u>メッシュ > クリーンアップ > 形状のポリゴン数削減 </u>
- オブジェクトの <u>モディファイア</u>から、 <u>デシメート</u>を追加する

![編集モードからデシメート](./src/03_how_to_decimate/images/01_01_how_to_decimate_in_edit_mode.png)

![モディファイアからデシメート](./src/03_how_to_decimate/images/01_02_how_to_decimate_in_modifier.png)

どちらも、設定項目、出来上がりは同じです。
Blenderの標準機能なので、具体的な使い方は調べてください。

機械的に行ってしまうだけあってか、削減具合によってはトポロジーが破壊されます。
また、場合によっては関節部分の切れ目が消えて、腕や足を曲げられなくなってしまう可能性もあるでしょう。
しかし、手動に比べて圧倒的に早く作業を終えれることから、こちらを採用するのも十分アリです。

時間や手間を惜しんでデシメートを採用したい場合は、デシメート結果が以下のチェックリストを満たしているか確認しましょう。

- 関節はちゃんと曲がるかどうか (ポーズモードでボーンをぐりぐり動かして確認する)
- ウェイト・UVに崩れがないか (治せる範囲なら問題なし)
- 変に穴が空いていないかどうか
- 口元などの <u>シェイプキー</u>で動く頂点について、削減後でも削減前と同様の表現が可能かどうか

## 自動削減のコツ

見えないポリゴン・見えづらいポリゴンを事前に手動で消してしまってから自動削減すると、より多く削減できます。

また、オブジェクトを細かく分割する (例: Cloth → ブラウスとスカートと靴と靴紐に分離する) と、デシメート結果にムラが出にくくなります。


## 手動での削減方法

手動でポリゴン数を削減する場合は、以下に紹介する方法を繰り返すだけで、比較的簡単にポリゴンを削れます。

### 事前準備: テクスチャの切れ目に印をつける

テクスチャの切れ目となる辺は、辺上の頂点については問題ないですが、切れ目をまたぐように点や辺との結合を行うと、よからぬ副作用を生みます。
見た目がガクッと悪くなるだけでなく、 最悪の場合、**展開されるUVの破損**により<span color="red">FBXエクスポート時にエラーとなってしまう</span>こともあります。

※ エラーになってしまった場合はTipsに修正方法を掲載しているので、そちらを参照してください

作業開始前に、どこが切れ目にあたるかを把握し、なるべくいじらないように目印をつけておくと、安心できると思います。

自分の場合だと、<u>シーム</u>をガイドに見立てて設定しています。 (シームの本来の使い方ではないです。)

![作業前に<u>UV Editing</u>で、端がどこにあるか探しておきます ](./src/03_how_to_decimate/images/05_01_texture.png)

![テクスチャの切れ端にマークしました。削減作業するときは、この辺の形は絶対に維持します。](./src/03_how_to_decimate/images/05_02_texture_marked.png)


### 不要そうな辺の<u>融解</u>

辺を選択して融解します。単純に整列したメッシュが並んでいるところでは、下図のように等間隔に選択して融解すると、かなり簡単にポリゴン数を削減できます。

![等間隔に辺ループを選択して・・](./src/03_how_to_decimate/images/02_01_select_lines.png)

![<u>辺を融解</u>する。いい感じに削れる](./src/03_how_to_decimate/images/02_02_remove_lines.png)


### 頂点をスライドして結合

結合したい頂点を複数選択し、<u>頂点をマージ</u> する際に、 `UV`にチェックを入れることで、元のままのUVを維持したまま頂点を結合できます

※ 全く崩れないわけではないです

![UVにチェックを入れない場合](./src/03_how_to_decimate/images/03_01_merge_without_uvfix.png)

![UVにチェックを入れる場合](./src/03_how_to_decimate/images/03_02_merge_with_uvfix.png)


### 辺をスライドして結合

頂点スライドを辺に対して行いたいとき、頂点を１つ１つ結合していくのは手間なので、<u>辺をスライド</u>して、まとめて結合する。

![動かしたい辺ループを選択して、まとめて <u>頂点をスライド</u>](./src/03_how_to_decimate/images/04_01_move_line.png)

![重ね合わせたら・・<u>頂点をマージ</u> → <u>距離から</u>](./src/03_how_to_decimate/images/04_02_merge_line.png)


## 手動削減のコツ

### 関節

関節にはかならずループとなる辺を最低１つは残しておきましょう。関節に辺ループがないと、ボーンを曲げたときに、形が曲がらなくなります。

![指の関節に、外側に2本・内側に1本でループを作ってます。これで綺麗に曲がります。](./src/03_how_to_decimate/images/06_01_finger.png)


### シェイプキーの破損を考慮する

次章にて説明するシェイプキーの破損の修復を事前に考慮し、口周りの頂点数を削りすぎないようにします。



---
<div style="page-break-before:always"/>