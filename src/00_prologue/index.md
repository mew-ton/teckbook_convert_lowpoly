# 序文

## はじめに

こんな酔狂な本を見ていただいて本当にありがとうございます。
技術書を書くのなんて人生初めてでありまして、至らぬところも多々ありますが、ご了承ください。

さて、Ocurus Quest 2 発売から概ね4ヶ月が経過しました[^0-1]。
発売以降、VRChat内でもQuestユーザを結構多く見かけるようになりましたね。
人数が増えたということはつまり、PCユーザにとっては、VRChatアバターのQuest対応がより重要になってきているとも言えます。

Quest対応アバターは一応私も用意はしておりましたが、PC対応アバターをそのままQuest向けにビルドした程度しかやっておりませんでした。
そうすると、当然statusはvery poorになってしまうんですよね。
Questからは、poor以上のアバターはデフォルトで表示されず、ロボット表示になり、show avatarしてようやく見ることができる仕様になっています[^0-2]。
チュートリアルワールドで初心者案内する際には特に、ロボットとして見られたくないんですよね。
そのため、泣く泣くパブリックのQuestでのステータスがMedium以下のパブリックアバターに切り替えたものです。

せっかく、かわいく改変したんだから、Questユーザにもデフォルトで表示されてほしいんですよね。
しかし、その道や険しいのです。
過去に何度かローポリ化対応を行ったことがあるのですが、とにかく苦痛を強いられるものでした。
QuestでのMediumへ対応する場合、最低限ポリゴン数7,500以下にする必要があり、Blender初心者の私にとっては、トライアンドエラーアンドエラーアンドエラーの繰り返しでした。
本書は、この時の試行錯誤を備忘録としてまとめていったものです。
Questで**ステータスMedium以下の**対応ユーザが、もっと増えてほしいな、という気持ちも込めています。

きっと、もっとちゃんと調べれば、もっと最適な方法がきっとあるはずです。
指摘やマサカリなどはすべて受け付けますので、TwitterのDMか、配布元のGithubのリポジトリのIssueにでも遠慮なくぶつけていただければと思います。
よろしくお願いいたします。


[^0-1]: 発売日が2020/10/13なので、今日(2021/02/13: 入稿締め切り前日)が丁度4ヶ月前です。
[^0-2]: 公式に記載あり。poorとverypoorはデフォルトだとどちらもロボット化される。ただし、設定緩和によりpoorはデフォルトでも表示できるようにすることができる。とのこと。実際にQuestを持っていないので、確認はできていない。[VRChat - Avatar Performance Ranking System](https://docs.vrchat.com/docs/avatar-performance-ranking-system)

## 本書で取り上げるもの

本書では、**ハイポリアバターをQuest向けにローポリ化してVRChatのアバターとしてアップロードするまでの作業工程**について、私が行った事を備忘録的にまとめていきます。
具体的には、以下について解説します。

- Blender: アバターのQuest化対応のために必要なBlender上の操作
- Blender: UVをなるべく壊さずにポリゴン数を減らすためのBlender上の操作。
- Blender: 崩壊するシェイプキーをもとに戻す方法
- Unity: Questアバター化のためのMeshBakerの使い方、出来上がりをVRCアバターとしてアップロードする手順
- 全般: 頬染め表情のQuest対応方法

また、以下については触れません。

- Blender: ローポリで見た目を良くするためのポリ割りのしかた
- Blender: ウェイトの塗り方
- Unity: FBXファイルをインポートしてVRCアバターとしてアップロードするまでの手順
- Unity: VRC_AvatarDescriptorの設定方法
- Unity: アニメーションの編集のしかた
- 他: テクスチャ編集のしかた

本書執筆のために、並行してPC向けアバター「サタリナ族のメイドさん」を、QuestでランクExcellentに対応する改変作業を行ったので、その時の作業記録を記しています。
アバター削減作業自体は、元のアバターによりけりであるところがあるので、**はじめにサタリナさんを使っての作業記録をざっくり記してから** その後の章で、細かい作業工程における解説をしていきます。

正直なところ、ポリゴン数の削減はアバターのQuest対応に絶対に必要な作業ではありません。
しかし、普段使いのアバターをQuestユーザ向けに、Medium以下の軽量のアバターとして対応したいと考える方が、私以外にも少なからずいらっしゃるはずです。本書はそのような方を対象としています。

作業量は結構多いです。決して、身を削らないように。

[^0-3]: 5分程度で調べました。[ますきゃっとを10分でQuest対応する方法](https://docs.google.com/document/d/1H62CbygqgQJvLGSQ6o7b9zq0boQNLiuURYTkSOJOqeo/edit)

## 対象とか前提条件とか

Blender, Unty, Photoshop等の各ツールをまたいでの解説になるため、基本的な部分には触れません。したがって、以下のレベル感がある方を対象としています

<dl>
    <dt>Blender</dt>
    <dd> アバター作成における基本操作 (モデリング・UV展開・ウェイト塗り) を調べながらでも行える。かつFBX形式のファイルエクスポートができる。</dd>
    <dt>Unity</dt>
    <dd> FBXファイルをインポートしてアバター化ができる。表情改変のためにアニメーションをいじったことがある。VRCのPC向けアバターをvery poorでもよいのでQuest化対応をしたことがある。<dd>
    <dt> Photoshop, Gimp等の画像編集用ソフト </dt>
    <dd> PSD形式のファイルを使ってテクスチャ改変ができる。アバターに同梱されているPSDファイルのレイヤー構成をざっくりでも理解できる</dd>
    <dt> 英語 </dt>
    <dd> Blender, Unityのエラーログは全て英語です。機械翻訳を使いながらでもなんとなく理解できる程度には会ったほうがいいです </dd>
</dl>

本書の解説は、2021/02/13現在でのVRChatアバター開発環境を基準としています。
具体的なバージョンは以下の通りです。
厳密に従う必要はありません。

- blender v2.83.1
- Unity v2018.4.20f1
- VRC SDK3 avatar 2020.12.09.04.45
- [サタリナ族のメイドさん](https://booth.pm/ja/items/2589069) v1.01 [^0-4]
- [人造アリス](https://booth.pm/ja/items/1535711) v2.1 [^0-5]
- [ミーシェ](https://booth.pm/ja/items/1256087) v1.02 [^0-6]

VRC SDKについては、理論上SDK2でも同じ結果になるはずです。なお、未検証のため、保証はしません。

また、PCでの作業が非常に多くなりがちです。
**肩や腰に多く負担がかかると、VR生活においても多大な影響があります**。
決して無理はせぬよう、軽くヨガなどのストレッチを行う、お風呂にはちゃんとお湯を張る、などなど、疲れを癒やす方法をちゃんと用意しましょう。[^0-7]


[^0-4]: サタリナさんはいいぞ！
[^0-5]: 人造アリスちゃんはいいぞ！
[^0-6]: ミーシェちゃんはいいぞ！！
[^0-7]: バランスボールが非常におすすめです。バランスボールに座ってPCに向かうだけで、猫背でない正しい姿勢で座ることが出来ます。疲れた時のストレッチにも使えるし、体幹トレーニングもできてとても良いです。フルトラならVRChat内でちょっとえっちいムーヴができます。

## 補足

BlenderやUnityなどの、検索に使えそうなキーワードを全て <u>下線</u> で表記します。つまるところ、この文字列でそのままググれば、たいていは目的の情報にたどり着けます。間違いがあったらご指摘ください。

---
<div style="page-break-before:always"/>