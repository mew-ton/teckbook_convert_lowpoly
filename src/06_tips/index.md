# Tips

## あれ？マテリアル２つ使ってない？Excellentにならないのでは？

よく見ろ！！！条件は Material **Slot** だ！！！

アバター全体を通してマテリアル数ではなく、マテリアルスロットの総数が1以下であれば、Excellentです。
アニメーションでは、使用するマテリアルを変更する対応をしているだけで、スロットの数に変更はありません。

つまり、**Excellent** です。

## Quest対応アバターの出来栄えを確認する楽な方法

VRC内でのアバターの出来栄えの確認を自分でするには、
作成したQuest向けのアバターを、PC向けとしてビルドしてアップロードするとよいです。

最終的にはQuestユーザに見てもらうのが一番です。

## Excellent対応なしで、頬染めアニメーションをQuest対応したい

一般的なユーザだと、シェーダーをMobileに変更してQuest対応する人が多数と思われます。

一応、アバターによるところはありますが、基本的には可能です。
頬染めのアニメーションを複製し、Quest向けの頬染めアニメーションとして、以下を設定するとできます。

- 前章において説明した、マテリアル切り替えを使った頬染め表現をアニメーションに追加
- 元アバターの頬染め表現として動かすシェイプキーのアニメーションを削除

## FBXエクスポート時にエラーとなる場合の対処

FBXエクスポート時にエラーとなる場合、UV展開が破損している可能性があります。以下に、その判別方法と修正方法を説明していきます。

### 判別方法

FBXエクスポート時に、表示されるエラーメッセージを確認して、以下の一文があるのを確認しましょう。あればUV破損によるエラーです。

```
io_scene_fbx\export_fbx_bin.py", line 1174, in <generator> elem_data_single_int32_array(lay_uv, b"UVIndex", (uv2idx[uv_id] for uv_id in_uvtuples_gen(t_luv, t_lvindex)))
```

※ BlenderのFBXプラグインバージョンによって、多少異なる場合があると思います。確証はないです。少なくとも `UVIndex` の文字があるなら、このエラーだと疑って良いと思います。

![実際に出たエラーログ](./src/06_tips/images/03_01_errorlog.png)


### 破損しているUVデータの確認方法

全てのオブジェクトのUVを確認しましょう。どこかに、三角になっていない頂点があるはずです。下図は私が実際に確認した、三角形になっていない点です。

※ たまに三角形の頂点３つが重なって１つの点になっている場合もあるので注意

![この点。三角の頂点が１つだけポツンとある感じ。なんか他にも頂点が明後日に伸びているけれど、こちらは三角になっているためエラーではない](./src/06_tips/images/03_02_error_uvs.png)

### 壊れたUVの修正方法

問題となっている点や辺を含む形で、UV展開をしなおします。以下の手順で作業すると、とっても楽に対処できます

1. 元オブジェクトのUV展開画像を用意する
2. 直したいオブジェクトのテクスチャをその画像にする
3. 直したいUVを選択
4. 元オブジェクトのUVをガイドにして、壊れたUVを修正する

![元のUVをガイドに重ねていくだけなので、超絶楽](./src/06_tips/images/03_03_fix_broken_uvs.png)

## MeshBakerがうまくベイクしてくれない

コンソールログをみましょう。公式の[FAQ](http://digitalopus.ca/site/mesh-baker-faq/)に、ログに対応する対処法が英語で書いてあるようです。

## MeshBakerFreeを使う場合

WIP

以下について解説します！
- 躓かないローポリ化の作業方法
- Quest化向けのMeshBakerの使い方
- 頬染めアニメーションのQuest対応化

---
<div style="page-break-before:always"/>